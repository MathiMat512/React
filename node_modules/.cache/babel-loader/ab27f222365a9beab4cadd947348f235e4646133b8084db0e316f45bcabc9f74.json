{"ast":null,"code":"import React,{useState}from'react';import logo from'../images/logo.png';import'./Login.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[usuario,setUsuario]=useState('');const[mensaje,setMensaje]=useState('');const[mensajeTipo,setMensajeTipo]=useState('');const mostrarMensaje=(mensaje,tipo)=>{setMensaje(mensaje);setMensajeTipo(tipo);};const handleSubmit=async event=>{event.preventDefault();const usuarioTrimmed=usuario.trim();if(!usuarioTrimmed){mostrarMensaje('Por favor, ingrese un usuario.','error');return;}mostrarMensaje('Validando usuario...','info');try{const response=await fetch('http://localhost:3001/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({usuario:usuarioTrimmed})});const data=await response.json();console.log('Respuesta del servidor:',data);if(!response.ok){throw new Error(data.mensaje||'Error en la validación');}if(data.success){mostrarMensaje('¡Usuario válido! Redireccionando...','success');// Guardar en sessionStorage\nsessionStorage.setItem('usuarioData',JSON.stringify({usuario:data.usuario}));console.log('Datos guardados en sessionStorage:',sessionStorage.getItem('usuarioData'));// Redireccionar luego de 1 segundo\nsetTimeout(()=>{window.location.href='/principal';// Redirige a la página principal (puedes cambiarla)\n},1000);}else{mostrarMensaje(data.mensaje||'Error de autenticación','error');}}catch(error){console.error('Error en la petición:',error);mostrarMensaje('Error en el servidor. Intente nuevamente.','error');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo de la empresa\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"h2login\",children:\"Iniciar Sesi\\xF3n\"}),/*#__PURE__*/_jsxs(\"form\",{id:\"loginForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-grouplogin\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"labellogin\",htmlFor:\"usuario\",children:\"Usuario:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"inputlogin\",type:\"text\",id:\"usuario\",value:usuario,onChange:e=>setUsuario(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{className:\"buttonlogin\",type:\"submit\",id:\"submitBtn\",children:\"Entrar\"})]}),mensaje&&/*#__PURE__*/_jsx(\"div\",{id:\"mensaje\",className:`mensaje ${mensajeTipo}`,children:mensaje})]});}export default Login;","map":{"version":3,"names":["React","useState","logo","jsx","_jsx","jsxs","_jsxs","Login","usuario","setUsuario","mensaje","setMensaje","mensajeTipo","setMensajeTipo","mostrarMensaje","tipo","handleSubmit","event","preventDefault","usuarioTrimmed","trim","response","fetch","method","headers","body","JSON","stringify","data","json","console","log","ok","Error","success","sessionStorage","setItem","getItem","setTimeout","window","location","href","error","className","children","src","alt","id","onSubmit","htmlFor","type","value","onChange","e","target","required"],"sources":["C:/Users/Mathias/Downloads/Pruebas-React/src/Login/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport logo from '../images/logo.png';\r\nimport './Login.css';\r\n\r\nfunction Login() {\r\n    const [usuario, setUsuario] = useState('');\r\n    const [mensaje, setMensaje] = useState('');\r\n    const [mensajeTipo, setMensajeTipo] = useState('');\r\n  \r\n    const mostrarMensaje = (mensaje, tipo) => {\r\n      setMensaje(mensaje);\r\n      setMensajeTipo(tipo);\r\n    };\r\n  \r\n    const handleSubmit = async (event) => {\r\n      event.preventDefault();\r\n  \r\n      const usuarioTrimmed = usuario.trim();\r\n      if (!usuarioTrimmed) {\r\n        mostrarMensaje('Por favor, ingrese un usuario.', 'error');\r\n        return;\r\n      }\r\n  \r\n      mostrarMensaje('Validando usuario...', 'info');\r\n  \r\n      try {\r\n        const response = await fetch('http://localhost:3001/api/auth/login', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({ usuario: usuarioTrimmed })\r\n        });\r\n  \r\n        const data = await response.json();\r\n        console.log('Respuesta del servidor:', data);\r\n  \r\n        if (!response.ok) {\r\n          throw new Error(data.mensaje || 'Error en la validación');\r\n        }\r\n  \r\n        if (data.success) {\r\n          mostrarMensaje('¡Usuario válido! Redireccionando...', 'success');\r\n  \r\n          // Guardar en sessionStorage\r\n          sessionStorage.setItem('usuarioData', JSON.stringify({ usuario: data.usuario }));\r\n          console.log('Datos guardados en sessionStorage:', sessionStorage.getItem('usuarioData'));\r\n  \r\n          // Redireccionar luego de 1 segundo\r\n          setTimeout(() => {\r\n            window.location.href = '/principal'; // Redirige a la página principal (puedes cambiarla)\r\n          }, 1000);\r\n        } else {\r\n          mostrarMensaje(data.mensaje || 'Error de autenticación', 'error');\r\n        }\r\n  \r\n      } catch (error) {\r\n        console.error('Error en la petición:', error);\r\n        mostrarMensaje('Error en el servidor. Intente nuevamente.', 'error');\r\n      }\r\n    };\r\n\r\n    return (\r\n            <div className=\"login-container\">\r\n            <img src={logo} alt=\"logo de la empresa\"/>\r\n            <h2 className='h2login'>Iniciar Sesión</h2>\r\n            <form id=\"loginForm\" onSubmit={handleSubmit}>\r\n                <div className=\"input-grouplogin\">\r\n                    <label className='labellogin' htmlFor=\"usuario\">Usuario:</label>\r\n                    <input\r\n                    className='inputlogin'\r\n                    type=\"text\"\r\n                    id=\"usuario\"\r\n                    value={usuario}\r\n                    onChange={(e) => setUsuario(e.target.value)}\r\n                    required\r\n                    />\r\n                </div>\r\n                <button className='buttonlogin' type=\"submit\" id=\"submitBtn\">Entrar</button>\r\n                </form>\r\n                    {mensaje && (\r\n                    <div id=\"mensaje\" className={`mensaje ${mensajeTipo}`}>\r\n                        {mensaje}\r\n                    </div>\r\n                )}\r\n            </div>\r\n    );\r\n}\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}